<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4">Admin Dashboard</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- Total Users Card -->
            <a href="users.html" class="bg-white p-4 rounded shadow hover:bg-gray-50 transition duration-300">
                <h2 class="text-xl font-bold mb-2"><i class="fas fa-users"></i> Number of Users</h2>
                <p class="text-gray-700" id="totalUsers">Loading...</p>
            </a>

            <!-- Premium Users Card -->
            <a href="premium_users.html" class="bg-white p-4 rounded shadow hover:bg-gray-50 transition duration-300">
                <h2 class="text-xl font-bold mb-2"><i class="fas fa-user-shield"></i> Premium Users</h2>
                <p class="text-gray-700" id="premiumUsers">Loading...</p>
            </a>

            <!-- Words Content Card -->
            <a href="words.html" class="bg-white p-4 rounded shadow hover:bg-gray-50 transition duration-300">
                <h2 class="text-xl font-bold mb-2"><i class="fas fa-file-alt"></i> Words Content</h2>
                <p class="text-gray-700" id="wordsContent">Loading...</p>
            </a>

            <!-- Audio Content Card -->
            <a href="audio.html" class="bg-white p-4 rounded shadow hover:bg-gray-50 transition duration-300">
                <h2 class="text-xl font-bold mb-2"><i class="fas fa-music"></i> Audio Content</h2>
                <p class="text-gray-700" id="audioContent">Loading...</p>
            </a>

            <!-- Video Content Card -->
            <a href="video.html" class="bg-white p-4 rounded shadow hover:bg-gray-50 transition duration-300">
                <h2 class="text-xl font-bold mb-2"><i class="fas fa-video"></i> Video Content</h2>
                <p class="text-gray-700" id="videoContent">Loading...</p>
            </a>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <div class="fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 flex justify-around">
        <a href="#" class="flex flex-col items-center">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="upload_leo.html" class="flex flex-col items-center">
            <i class="fas fa-upload"></i>
            <span>Uploads</span>
        </a>
        <a href="control.html" class="flex flex-col items-center">
            <i class="fas fa-cogs"></i>
            <span>Control</span>
        </a>
    </div>

    <!-- Firebase Scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDfYDVYx10P9FUUNTlXw3dfTjPNNlR-Rhc",
            authDomain: "simulizi23.firebaseapp.com",
            databaseURL: "https://simulizi23-default-rtdb.firebaseio.com",
            projectId: "simulizi23",
            storageBucket: "simulizi23.firebasestorage.app",
            messagingSenderId: "306995992624",
            appId: "1:306995992624:web:169d1fa3e2866d771e35f5",
            measurementId: "G-7RLGM76PSE"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Function to fetch data from Firebase
        async function fetchData() {
            try {
                // Fetch total users
                const usersRef = ref(database, 'users');
                const usersSnapshot = await get(usersRef);
                const totalUsers = usersSnapshot.exists() ? Object.keys(usersSnapshot.val()).length : 0;
                document.getElementById('totalUsers').textContent = totalUsers;

                // Fetch premium users
                const premiumUsersRef = ref(database, 'users');
                const premiumUsersSnapshot = await get(premiumUsersRef);
                const premiumUsers = premiumUsersSnapshot.exists() 
                    ? Object.values(premiumUsersSnapshot.val()).filter(user => [1, 2, 3].includes(user.premium)).length 
                    : 0;
                document.getElementById('premiumUsers').textContent = premiumUsers;

                // Fetch words content
                const wordsRef = ref(database, 'words');
                const wordsSnapshot = await get(wordsRef);
                const wordsContent = wordsSnapshot.exists() ? Object.keys(wordsSnapshot.val()).length : 0;
                document.getElementById('wordsContent').textContent = wordsContent;

                // Fetch audio content
                const audioRef = ref(database, 'audio');
                const audioSnapshot = await get(audioRef);
                const audioContent = audioSnapshot.exists() ? Object.keys(audioSnapshot.val()).length : 0;
                document.getElementById('audioContent').textContent = audioContent;

                // Fetch video content
                const videoRef = ref(database, 'video');
                const videoSnapshot = await get(videoRef);
                const videoContent = videoSnapshot.exists() ? Object.keys(videoSnapshot.val()).length : 0;
                document.getElementById('videoContent').textContent = videoContent;
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        // Call the fetchData function
        fetchData();
    </script>
</body>
</html>